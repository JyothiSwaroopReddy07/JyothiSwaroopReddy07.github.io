<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Publishing a PyPI package | Awesome Hugo blog</title>
<meta property="og:title" content="Publishing a PyPI package | Awesome Hugo blog" />
<meta name="twitter:title" content="Publishing a PyPI package | Awesome Hugo blog" />
<meta itemprop="name" content="Publishing a PyPI package | Awesome Hugo blog" />
<meta name="application-name" content="Publishing a PyPI package | Awesome Hugo blog" />
<meta property="og:site_name" content="Awesome hugo blog" />

<meta name="description" content="Google summer of code week 12">
<meta itemprop="description" content="Google summer of code week 12" />
<meta property="og:description" content="Google summer of code week 12" />
<meta name="twitter:description" content="Google summer of code week 12" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://devoworm.github.io/Blogs" />
  <meta property="og:image" content="https://devoworm.github.io/Blogs" />
  <meta name="twitter:image" content="https://devoworm.github.io/Blogs" />
  <meta name="twitter:image:src" content="https://devoworm.github.io/Blogs" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2020-08-09T00:00:00Z />
    <meta property="article:published_time" content=2020-08-09T00:00:00Z />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Publishing a PyPI package",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2020-08-09",
        "description": "Google summer of code week 12",
        "wordCount":  487 ,
        "mainEntityOfPage": "True",
        "dateModified": "2020-08-09",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "Awesome Hugo blog"
        }
    }
    </script>

  <meta name="generator" content="Hugo 0.92.2" />

  

  <link rel="canonical" href="https://devoworm.github.io/Blogs/posts/mayukhdebgsocwork/gsoc-2020-august-9/"><link href="/Blogs/sass/main.min.0eebb6db90b4ec9f4444ef402f08421ee056025ba860df3d749a9f299d472008.css" rel="stylesheet"><link href="/Blogs/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

  

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  
  <link rel="icon" type="image/svg+xml" href="/images/favicon/favicon.svg">

  
    </head><body data-theme = "dark" class="notransition">
<script src="https://devoworm.github.io/Blogs/js/themeLoader.min.0ea9375d525d6f19779c6d41cfaf9e166e47014d9734ff071daad3a4ff12d147.js"></script><div class="navbar" role="navigation">
  <nav class="menu" aria-label="Main Navigation">
    <a href="/" class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
    </a>
    <input type="checkbox" id="menu-trigger" class="menu-trigger" />
    <label for="menu-trigger">
      <span class="menu-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
      </span>
    </label>

    <div class="trigger">
      <ul class="trigger-container">
        
        
          <li>
            <a 
            class="menu-link "
            href="/Blogs/">
            Home
            </a>
            
          </li>
        
          <li>
            <a 
            class="menu-link active"
            href="/Blogs/posts/">
            Posts
            </a>
            
          </li>
        
          <li>
            <a 
            class="menu-link "
            href="/Blogs/about/">
            About
            </a>
            
          </li>
        
        <li class="menu-separator">
          <span>|</span>
        </li>
      </ul>
      <a id="mode" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
        <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
      </a>
    </div>
  </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Publishing a PyPI package</h1>
                
                <div class="post-meta">
                    <time datetime="2020-08-09T00:00:00&#43;00:00" itemprop="datePublished"> Aug 9, 2020 </time>
                </div>
            </header>
            <div class="page-content">
                <p>First off, this blog post is definitely not an official guide, if you&rsquo;re looking for an official guide, have a look <a href="https://packaging.python.org/tutorials/packaging-projects/">here</a>.</p>
<p>This blog post is pretty specific to the PyPI package that I authored along with <a href="https://github.com/balicea">Bradly</a> and <a href="https://github.com/ujjwalll">Ujjwall</a>.</p>
<h2 id="the-project-structure">The project structure:</h2>
<figure><img src="https://raw.githubusercontent.com/DevoLearn/devolearn/master/images/project_structure.jpg" width="80%"/>
</figure>

<p>Each of the classes under <code>devolearn</code> have their own folder which would contain all the utils required for that class including the model files.</p>
<p>For example, the folder <code>embryo_generator_model</code> would look like:</p>
<pre tabindex="0"><code>├── embryo_generator_model
    ├── embryo_generator_model.py
    ├── embryo_generator.pt
    ├── __init__.py
</code></pre><h2 id="the-repo-structure-for-pypi">The repo structure for PyPI</h2>
<pre tabindex="0"><code>devolearn
├── LICENSE
├── README.md
├── devolearn
│   ├── __init__.py
│   ├── model_1
│   │    ├── model_1.py
│   │    ├── model_1.pt
│   │    ├── __init__.py
│   ├── model_2
│         ├── model_2.py
│         ├── model_2.pt
│         ├── __init__.py
│
├── setup.py

</code></pre><h2 id="generating-a-distribution-archive">Generating a distribution archive</h2>
<p>Once the folder was structured, The next objective was to generate distribution packages for the package. These are archives that are uploaded to the Package Index and can be installed by pip.</p>
<p>For this I had to install the latest versions of setuptools and wheel with:</p>
<pre tabindex="0"><code>python3 -m pip install --user --upgrade setuptools wheel

</code></pre><p>Then we had to run the following command  in the same directory as <code>setup.py</code>:</p>
<pre tabindex="0"><code>python3 setup.py sdist bdist_wheel
</code></pre><p>This command should output a lot of text and once completed should generate two files in the dist directory:</p>
<pre tabindex="0"><code>dist/
    devolearn-0.1.9.tar.gz
    devolearn-0.1.9-py3-none-any.whl
</code></pre><h2 id="uploading-the-archive">Uploading the archive</h2>
<p>First, we&rsquo;d have to upload the package to test.pypi.org, and for that we&rsquo;d have to <a href="https://test.pypi.org/account/register/">make</a> an account. Then go to <a href="https://test.pypi.org/manage/account/#api-tokens">this url</a> and create a new API token.</p>
<p>Then we upload the package using the twine package:</p>
<pre tabindex="0"><code>python3 -m pip install --user --upgrade twine
</code></pre><p>And then:</p>
<pre tabindex="0"><code>python3 -m twine upload --repository testpypi dist/*
</code></pre><p>When prompted for a username, use <code>__token__</code> and then enter the token value as the password;</p>
<pre tabindex="0"><code>Uploading distributions to https://test.pypi.org/legacy/
Enter your username: __token__
Enter your password: your_token_value
</code></pre><h2 id="the-problem-with-package-size">The problem with package size</h2>
<p>In order  to upload a package to test.pypi.org, it had to be under 100 mb, but devolearn was above 150 mb because of the model files. So the workaround was to not include the models in the <code>MANIFEST.in</code> file and downloading the models from GitHub directly using <code>wget</code> from within the package. The models would get downloaded when the user calls the model class for the first time.</p>
<p><strong>Note:</strong>  <code>MANIFEST.in</code> is a file that can be used to specify the <strong>non</strong> <code>.py</code> files that you&rsquo;d want to include in the python package to be uploaded, for example, I included the <code>scaler.gz</code> file in our manifest file.</p>
<h2 id="uploading-to-pypi">Uploading to PyPI</h2>
<p>When you are ready to upload a real package to the Python Package Index you can do much the same as you did above,</p>
<pre tabindex="0"><code>python3 -m twine upload dist/*
</code></pre><h2 id="done-and-dusted">Done and dusted</h2>
<p>This post was basically my own informal guide for uploading a package to PyPI. If you&rsquo;ve read this far, you need to take a break from stalking me so hard.</p>

            </div>
        </article>
    </main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/hugo-sid" target="_blank" rel="noopener noreferrer me" title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://twitter.com" target="_blank" rel="noopener noreferrer me" title="Twitter">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me" title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a></div>
    <small class="footer_copyright">
        © 2023 Sidharth R.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noreferrer noopener">Hugo blog awesome</a>
        theme on
        <a href="https://gohugo.io" target="_blank" rel="noreferrer noopener">Hugo</a>.
    </small>
</footer>
<script src="https://devoworm.github.io/Blogs/js/themeSwitchnMenu.min.f2fa3aed078bf5a7b612bf5548ddd0cb9891199ed24b5b673465df221e70bf4c.js"></script></body>
</html>
